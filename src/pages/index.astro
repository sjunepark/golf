---
import '../styles/global.css';
import { Font } from 'astro:assets';
import { ModeToggleDropdown } from '@/components/theme/ModeToggleDropdown';
import { ModeToggleSwitch } from '@/components/theme/ModeToggleSwitch';
import { Switch, SwitchWithIcon } from '@/components/ui/switch';

const title = "Astro";
const description = "A simple Astro site";
const canonicalURL = new URL(Astro.url.pathname, Astro.site || 'http://localhost:4321');
---

<script is:inline>
	const getThemePreference = () => {
		if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
			return localStorage.getItem('theme');
		}
		return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
	};
	const isDark = getThemePreference() === 'dark';
	document.documentElement.classList[isDark ? 'add' : 'remove']('dark');

	if (typeof localStorage !== 'undefined') {
		const observer = new MutationObserver(() => {
			const isDark = document.documentElement.classList.contains('dark');
			localStorage.setItem('theme', isDark ? 'dark' : 'light');
		});
		observer.observe(document.documentElement, { attributes: true, attributeFilter: ['class'] });
	}
</script>

<html lang="en">
	<head>
		<!-- Global Metadata -->
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />

		<!-- Font preloads -->
		<Font cssVariable="--font-inter" preload />

		<!-- Canonical URL -->
		<link rel="canonical" href={canonicalURL} />

		<!-- Primary Meta Tags -->
		<title>{title}</title>
		<meta name="title" content={title} />
		<meta name="description" content={description} />

		<!-- Open Graph / Facebook -->
		<meta property="og:type" content="website" />
		<meta property="og:url" content={Astro.url} />
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />

		<!-- Twitter -->
		<meta property="twitter:card" content="summary_large_image" />
		<meta property="twitter:url" content={Astro.url} />
		<meta property="twitter:title" content={title} />
		<meta property="twitter:description" content={description} />
	</head>
	<body>
		<nav class="p-4 flex justify-between items-center">
			<h1 class="text-2xl font-bold">Astro</h1>
			<div class="flex items-center space-x-3">
				<ModeToggleDropdown client:load />
				<ModeToggleSwitch client:load />
			</div>
		</nav>
		
		<main class="p-4 space-y-8">
			<p class="text-muted-foreground">Welcome to your Astro site with dark mode support!</p>
			
			<section class="space-y-6">
				<div class="flex items-center justify-between">
					<h2 class="text-xl font-semibold">Theme Toggle Examples</h2>
					<div class="flex items-center space-x-4 text-sm text-muted-foreground">
						<span>Dropdown: 3 options</span>
						<span>â€¢</span>
						<span>Switch: Light/Dark only</span>
					</div>
				</div>
			</section>
			
			<section class="space-y-6">
				<h2 class="text-xl font-semibold">Switch Component Examples</h2>
				
				<div class="grid grid-cols-1 md:grid-cols-2 gap-8">
					<div class="space-y-4">
						<h3 class="text-lg font-medium">Standard Switch</h3>
						<div class="space-y-3">
							<div class="flex items-center space-x-3">
								<Switch client:load />
								<label class="text-sm">Default switch</label>
							</div>
							
							<div class="flex items-center space-x-3">
								<Switch client:load defaultChecked />
								<label class="text-sm">Default checked</label>
							</div>
							
							<div class="flex items-center space-x-3">
								<Switch client:load disabled />
								<label class="text-sm text-muted-foreground">Disabled switch</label>
							</div>
							
							<div class="flex items-center space-x-3">
								<Switch client:load disabled defaultChecked />
								<label class="text-sm text-muted-foreground">Disabled checked</label>
							</div>
						</div>
					</div>
					
					<div class="space-y-4">
						<h3 class="text-lg font-medium">Switch with Icons</h3>
						<div class="space-y-3">
							<div class="flex items-center space-x-3">
								<SwitchWithIcon client:load />
								<label class="text-sm">Icon switch</label>
							</div>
							
							<div class="flex items-center space-x-3">
								<SwitchWithIcon client:load defaultChecked />
								<label class="text-sm">Icon checked</label>
							</div>
							
							<div class="flex items-center space-x-3">
								<SwitchWithIcon client:load disabled />
								<label class="text-sm text-muted-foreground">Disabled icon</label>
							</div>
							
							<div class="flex items-center space-x-3">
								<SwitchWithIcon client:load disabled defaultChecked />
								<label class="text-sm text-muted-foreground">Disabled checked</label>
							</div>
						</div>
					</div>
				</div>
				
				<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
					<div class="p-4 bg-muted rounded-lg">
						<h3 class="text-sm font-medium mb-3">Standard Settings</h3>
						<div class="space-y-3">
							<div class="flex items-center justify-between">
								<div class="space-y-0.5">
									<label class="text-sm font-medium">Email notifications</label>
									<p class="text-xs text-muted-foreground">Receive emails about account activity</p>
								</div>
								<Switch client:load />
							</div>
							
							<div class="flex items-center justify-between">
								<div class="space-y-0.5">
									<label class="text-sm font-medium">Marketing emails</label>
									<p class="text-xs text-muted-foreground">Receive emails about new products and features</p>
								</div>
								<Switch client:load defaultChecked />
							</div>
							
							<div class="flex items-center justify-between">
								<div class="space-y-0.5">
									<label class="text-sm font-medium">Security alerts</label>
									<p class="text-xs text-muted-foreground">Get notified about suspicious account activity</p>
								</div>
								<Switch client:load defaultChecked />
							</div>
						</div>
					</div>
					
					<div class="p-4 bg-muted rounded-lg">
						<h3 class="text-sm font-medium mb-3">Icon Settings</h3>
						<div class="space-y-3">
							<div class="flex items-center justify-between">
								<div class="space-y-0.5">
									<label class="text-sm font-medium">Push notifications</label>
									<p class="text-xs text-muted-foreground">Show visual feedback for actions</p>
								</div>
								<SwitchWithIcon client:load />
							</div>
							
							<div class="flex items-center justify-between">
								<div class="space-y-0.5">
									<label class="text-sm font-medium">Auto-save</label>
									<p class="text-xs text-muted-foreground">Automatically save changes</p>
								</div>
								<SwitchWithIcon client:load defaultChecked />
							</div>
							
							<div class="flex items-center justify-between">
								<div class="space-y-0.5">
									<label class="text-sm font-medium">Two-factor auth</label>
									<p class="text-xs text-muted-foreground">Enhanced security verification</p>
								</div>
								<SwitchWithIcon client:load defaultChecked />
							</div>
						</div>
					</div>
				</div>
			</section>
		</main>
	</body>
</html>